/*
* njSwipe - version 1.00.00  
* Native Javascript
* Copyright (c) 2015, Ninjoe
* Dual licensed under the MIT or GPL Version 2 licenses.
* https://en.wikipedia.org/wiki/MIT_License
* https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html
*/
var njSwipe=function(ele,direction){this.ele=ele;this.direction=direction;this.startX;this.startY;this.startTime;this.allowedTime=300;this.threshold=150;this.restraint=100;this.bindEvents();}
njSwipe.prototype.curry=function(fn,scope){scope=scope||window;var actualArgs=arguments;return function(){var args=[];for(var j=0;j<arguments.length;j++){args.push(arguments[j]);}
for(var i=2;i<actualArgs.length;i++){args.push(actualArgs[i]);}
return fn.apply(scope,args);};};njSwipe.prototype.bindEvents=function(){this.ele.addEventListener('touchstart',this.curry(this.touchStart,this));this.ele.addEventListener('mousedown',this.curry(this.touchStart,this));this.ele.addEventListener('touchmove',this.curry(this.touchMove,this));this.ele.addEventListener('mousemove',this.curry(this.touchMove,this));this.ele.addEventListener('touchend',this.curry(this.touchEnd,this));this.ele.addEventListener('mouseup',this.curry(this.touchEnd,this));};njSwipe.prototype.touchStart=function(e){e.preventDefault();var touch=e.type=='touchstart'?e.changedTouches[0]:e;this.startX=touch.pageX;this.startY=touch.pageY;this.startTime=new Date().getTime();};njSwipe.prototype.touchMove=function(e){e.preventDefault();};njSwipe.prototype.touchEnd=function(e){e.preventDefault();var touch=e.type=='touchend'?e.changedTouches[0]:e;var distX=touch.pageX-this.startX;var distY=touch.pageY-this.startY;var endTime=new Date().getTime()-this.startTime;var direction;if(endTime<=this.allowedTime){if(Math.abs(distX)>=this.threshold&&Math.abs(distY)<=this.restraint){direction=distX<0?'swipeleft':'swiperight';}else if(Math.abs(distY)>=this.threshold&&Math.abs(distX)<=this.restraint){direction=distY<0?'swipeup':'swipedown';}}
this.triggerEvent(direction);};njSwipe.prototype.triggerEvent=function(direction){if(this.direction==direction){var event=new Event(direction);this.ele.dispatchEvent(event);}};(function(){var orig_addEventListener=Element.prototype.addEventListener;Element.prototype.addEventListener=function(type,listener,useCapture){if(type=='swipeleft'||type=='swiperight'||type=='swipeup'||type=='swipedown'){new njSwipe(this,type);}
return orig_addEventListener.call(this,type,listener,useCapture);};}());